```mermaid
classDiagram
    class User {
        +long userId
        +String name
        +String email
        +String password
        +String nickname
        +String address
        +Balance balance
        +Coupon coupon
    }
    class Product {
        +long productId
        +String name
        +long price
    }
    class Option {
        +long optionId
        +long productId
        +String option
    }
    class Balance {
        +long balanceId
        +long userId
        +int amount
        +charge(amount)
        +withdrawal(amount)
    }
    class Stock {
        +long productId
        +long optionId
        +int stock
        +stockIn(amount)
        +stockOut(amount)
    }
    class Coupon {
        +long couponId
        +long userId
        +boolean isUsed
        +enum type RATIO, AMOUNT
        +use(price)
    }
    class Order {
        +long orderId
        +long userId
        +List<OrderItem> orderItemList
        +int totalPrice
        +calcTotalPrice()
    }
    class OrderItem {
        +long orderItemId
        +long productId
        +long optionId
        +int quantity
        +int price
        +calcPrice()
    }
    class Payment {
        +long paymentId
        +long orderId
        +int amount
        +enum method ACCOUNT, CARD
        +process()
        +refund()
    }
    Product "1" --> "0..n" Option
    Option "1" --> "1" Stock 
    User "1" --> "0..*" Order
    User "1" --> "1" Balance
    Order "1" --> "1..*" OrderItem
    User "1" --> "0..*" Coupon
    Payment "1" --> "1" Order
    Payment "1" --> "1" Balance
    OrderItem "1..n" --> "1" Product
```